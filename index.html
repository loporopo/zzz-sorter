<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zenless Zone Zero Character Sorter</title>
  <style>
    body {
      background-color: #121212; color: #f0f0f0; font-family: Arial, sans-serif;
      text-align: center; padding: 1em;
    }
    h1 { margin-bottom: 0.5em; }
    .container { display: flex; justify-content: space-around; flex-wrap: wrap; }
    .char {
      flex: 1 1 40%; margin: 1em;
    }
    .char img {
      width: 250px; height: 250px; object-fit: cover;
      border-radius: 8px; border: 2px solid #333;
    }
    .char-name { margin-top: 0.5em; font-weight: bold; }
    .buttons { margin: 1em 0; }
    button {
      margin: 0.5em; padding: 0.75em 1.5em; font-size: 1em;
      background-color: #333; color: #fff; border: none; border-radius: 6px; cursor: pointer;
    }
    button:hover { background-color: #555; }
    .results { max-width: 800px; margin: 2em auto; text-align: center; }
    .results img {
      width: 100px; height: 100px; object-fit: cover; border-radius: 6px; border: 1px solid #444;
      vertical-align: middle; margin-right: 1em;
    }
    .setup { margin: 2em auto; text-align: left; max-width: 400px; }
    .setup button { display: block; margin-top: 1em; }
  </style>
</head>
<body>

  <h1>Zenless Zone Zero Character Sorter</h1>

  <div class="setup" id="setup">
    <h2>Select Factions to Include:</h2>
    <label><input type="checkbox" class="faction-filter" value="Phaethon" checked> Phaethon</label><br>
<label><input type="checkbox" class="faction-filter" value="Cunning Hares" checked> Cunning Hares</label><br>
<label><input type="checkbox" class="faction-filter" value="Belobog Industries" checked> Belobog Industries</label><br>
<label><input type="checkbox" class="faction-filter" value="Victoria Housekeeping Co." checked> Victoria Housekeeping Co.</label><br>
<label><input type="checkbox" class="faction-filter" value="Obol Squad" checked> Obol Squad</label><br>
<label><input type="checkbox" class="faction-filter" value="Silver Squad" checked> Silver Squad</label><br>
<label><input type="checkbox" class="faction-filter" value="N.E.P.S" checked> N.E.P.S</label><br>
<label><input type="checkbox" class="faction-filter" value="Sons of Calydon" checked> Sons of Calydon</label><br>
<label><input type="checkbox" class="faction-filter" value="Section 6" checked> Section 6</label><br>
<label><input type="checkbox" class="faction-filter" value="Stars of Lyra" checked> Stars of Lyra</label><br>
<label><input type="checkbox" class="faction-filter" value="Mockingbird" checked> Mockingbird</label><br>
<label><input type="checkbox" class="faction-filter" value="Yunkui Summit" checked> Yunkui Summit</label><br>
<label><input type="checkbox" class="faction-filter" value="Spook Shack" checked> Spook Shack</label><br>
    <button onclick="startSorter()">Start Sorting</button>
  </div>

  <div class="container" id="sorter" style="display:none;">
    <div class="char" id="charA"><img id="imgA" src="" alt=""><div class="char-name" id="nameA"></div></div>
    <div class="char" id="charB"><img id="imgB" src="" alt=""><div class="char-name" id="nameB"></div></div>
  </div>

  <div class="buttons" id="controls" style="display:none;">
    <button onclick="vote('A')">Choose A</button>
    <button onclick="tie()">Tie</button>
    <button onclick="vote('B')">Choose B</button>
    <button onclick="undo()">Undo</button>
  </div>

  <div id="results" class="results"></div>

<script>
const allCharacters = [
  { name: "Belle", img: "images/Belle.png", faction: "Phaethon" },
  { name: "Wise", img: "images/Wise.png", faction: "Phaethon" },
  { name: "Anby Demara", img: "images/Anby_Demara.png", faction: "Cunning Hares" },
  { name: "Billy Kid", img: "images/Billy_Kid.png", faction: "Cunning Hares" },
  { name: "Nicole Demara", img: "images/Nicole_Demara.png", faction: "Cunning Hares" },
  { name: "Nekomiya Mana", img: "images/Nekomiya_Mana.png", faction: "Cunning Hares" },
  { name: "Anton Ivanov", img: "images/Anton_Ivanov.png", faction: "Belobog Industries" },
  { name: "Ben Bigger", img: "images/Ben_Bigger.png", faction: "Belobog Industries" },
  { name: "Koleda Belobog", img: "images/Koleda_Belobog.png", faction: "Belobog Industries" },
  { name: "Grace Howard", img: "images/Grace_Howard.png", faction: "Belobog Industries" },
  { name: "Corin Wickes", img: "images/Corin_Wickes.png", faction: "Victoria Housekeeping Co." },
  { name: "Alexandrina “Rina” Sebastiane", img: "images/Alexandrina_Rina_Sebastiane.png", faction: "Victoria Housekeeping Co." },
  { name: "Von Lycaon", img: "images/Von_Lycaon.png", faction: "Victoria Housekeeping Co." },
  { name: "Ellen Joe", img: "images/Ellen_Joe.png", faction: "Victoria Housekeeping Co." },
  { name: "Soldier 11", img: "images/Soldier11.png", faction: "Obol Squad" },
  { name: "Trigger", img: "images/Trigger.png", faction: "Obol Squad" },
  { name: "Soldier 0: Anby", img: "images/Soldier_0_Anby.png", faction: "Silver Squad" },
  { name: "Zhu Yuan", img: "images/Zhu_Yuan.png", faction: "N.E.P.S" },
  { name: "Qingyi", img: "images/Qingyi.png", faction: "N.E.P.S" },
  { name: "Jane Doe", img: "images/Jane_Doe.png", faction: "N.E.P.S" },
  { name: "Seth Lowell", img: "images/Seth_Lowell.png", faction: "N.E.P.S" },
  { name: "Caesar King", img: "images/Caesar_King.png", faction: "Sons of Calydon" },
  { name: "Luciana de Montefio", img: "images/Luciana_de_Montefio.png", faction: "Sons of Calydon" },
  { name: "Piper Wheel", img: "images/Piper_Wheel.png", faction: "Sons of Calydon" },
  { name: "Burnice White", img: "images/Burnice_White.png", faction: "Sons of Calydon" },
  { name: "Lighter", img: "images/Lighter.png", faction: "Sons of Calydon" },
  { name: "Pulchra Fellini", img: "images/Pulchra_Fellini.png", faction: "Sons of Calydon" },
  { name: "Hoshimi Miyabi", img: "images/Hoshimi_Miyabi.png", faction: "Section 6" },
  { name: "Soukaku", img: "images/Soukaku.png", faction: "Section 6" },
  { name: "Tsukishiro Yanagi", img: "images/Tsukishiro_Yanagi.png", faction: "Section 6" },
  { name: "Asaba Harumasa", img: "images/Asaba_Harumasa.png", faction: "Section 6" },
  { name: "Astra Yao", img: "images/Astra_Yao.png", faction: "Stars of Lyra" },
  { name: "Evelyn Chevalier", img: "images/Evelyn_Chevalier.png", faction: "Stars of Lyra" },
  { name: "Hugo Vlad", img: "images/Hugo_Vlad.png", faction: "Mockingbird" },
  { name: "Vivian Banshee", img: "images/Vivian_Banshee.png", faction: "Mockingbird" },
  { name: "Ju Fufu", img: "images/Ju_Fufu.png", faction: "Yunkui Summit" },
  { name: "Pan Yinhu", img: "images/Pan_Yinhu.png", faction: "Yunkui Summit" },
  { name: "Yixuan", img: "images/Yixuan.png", faction: "Yunkui Summit" },
  { name: "Ukinami Yuzuha", img: "images/Ukinami_Yuzuha.png", faction: "Spook Shack" },
  { name: "Alice Thymefield", img: "images/Alice_Thymefield.png", faction: "Spook Shack" }
];

let characters = [], queue = [], hist = [], scores = [], pair = [];

function startSorter() {
  const allowedFactions = Array.from(document.querySelectorAll('.faction-filter:checked')).map(cb => cb.value);
  characters = allCharacters.filter(c => allowedFactions.includes(c.faction));
  queue = shuffle([...characters]);
  hist = [];
  scores = {};
  characters.forEach(c => scores[c.name] = 0);
  document.getElementById('setup').style.display = 'none';
  document.getElementById('sorter').style.display = 'flex';
  document.getElementById('controls').style.display = 'block';
  next();
}

function shuffle(a) {
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function next() {
  if (queue.length < 2) return finish();
  pair = [queue.pop(), queue.pop()];
  document.getElementById('imgA').src = pair[0].img;
  document.getElementById('nameA').textContent = pair[0].name;
  document.getElementById('imgB').src = pair[1].img;
  document.getElementById('nameB').textContent = pair[1].name;
}

function vote(c) {
  const win = c === 'A' ? pair[0].name : pair[1].name;
  scores[win]++;
  hist.push({ type: 'vote', choice: c, pair: [...pair] });
  next();
}

function tie() {
  hist.push({ type: 'tie', pair: [...pair] });
  next();
}

function undo() {
  const last = hist.pop();
  if (!last) return;
  queue.push(...last.pair);
  if (last.type === 'vote') {
    const winner = last.choice === 'A' ? last.pair[0].name : last.pair[1].name;
    scores[winner]--;
  }
  next();
}

function finish() {
  document.getElementById('sorter').style.display = 'none';
  document.getElementById('controls').style.display = 'none';
  const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
  let html = '<h2>Your Ranking:</h2><ol>';
  sorted.forEach(([name]) => {
    const c = characters.find(ch => ch.name === name);
    html += `<li><img src="${c.img}" alt="${c.name}"> ${c.name}</li>`;
  });
  html += '</ol>';
  document.getElementById('results').innerHTML = html;
}
</script>
</body>
</html>
